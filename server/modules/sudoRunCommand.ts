// import { exec } from "child_process";
// import { promisify } from "util";
const util = require('util');
const execAsync = util.promisify(require('child_process').exec);

export async function runCommand(command: string) {
  const password = process.env.PASSWORD;

  if (command.includes("airodump-ng") && !command.includes("pkill")) {
    command += " > /dev/null 2>&1";
  }

  var rstdout: string = "";
  try {
    const { stdout } = await execAsync(
      `echo ${password} | sudo -S ${command}`,
      { maxBuffer: 1024 * 1024 }
    );
    rstdout = stdout;
  } catch (error) {
      console.log(`DEBUG: ${error}`);
  }
  
  return rstdout;
}
